# Configuración de Redis
redis:
  host: localhost
  port: 6379
  password: ${REDIS_PASSWORD:}
  timeout: 10000
  database: 0
  connection-pool-size: 64
  connection-minimum-idle-size: 10
  idle-connection-timeout: 10000
  connect-timeout: 10000
  retry-attempts: 3
  retry-interval: 1500

# Configuración de MicroProfile REST Client
quarkus:
  rest-client:
    # Cliente API
    cliente-api:
      url: ${CLIENTE_API_URL:http://localhost:8081}
      scope: jakarta.enterprise.context.RequestScoped
      connect-timeout: 5000
      read-timeout: 10000

    # Usuario API
    usuario-api:
      url: ${USUARIO_API_URL:http://localhost:8082}
      scope: jakarta.enterprise.context.RequestScoped
      connect-timeout: 5000
      read-timeout: 10000

    # Venta API
    venta-api:
      url: ${VENTA_API_URL:http://localhost:8083}
      scope: jakarta.enterprise.context.RequestScoped
      connect-timeout: 5000
      read-timeout: 10000

    # Session API
    session-api:
      url: ${SESSION_API_URL:http://localhost:8084}
      scope: jakarta.enterprise.context.RequestScoped
      connect-timeout: 5000
      read-timeout: 10000

# Configuración de Kafka
kafka:
  bootstrap:
    servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}

mp:
  messaging:
    outgoing:
      ventas-out:
        connector: smallrye-kafka
        topic: ${KAFKA_VENTAS_TOPIC:ventas-events}
        value:
          serializer: io.quarkus.kafka.client.serialization.ObjectMapperSerializer
        key:
          serializer: org.apache.kafka.common.serialization.StringSerializer
        # Configuración de fiabilidad
        acks: all
        retries: 3
        max-in-flight-requests-per-connection: 5
        enable-idempotence: true
        # Configuración de rendimiento
        batch-size: 16384
        linger-ms: 10
        buffer-memory: 33554432
        compression-type: snappy
        # Timeouts
        request-timeout-ms: 30000
        delivery-timeout-ms: 120000
        # Configuración de particiones
        partitioner: org.apache.kafka.clients.producer.internals.DefaultPartitioner
